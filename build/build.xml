<project name="MARBL Finding Aids" default="all" basedir=".">

<import file="common-targets.xml"/>

<target name="all" depends="xml,add-ids,clean,final-info" 
 description="* Add ids, convert entities to unicode, validate, and clean up"/>


<target name="input" depends="common-targets.input">

<!-- remove any doctype (xmetal is setting it wrong) -->
  <replaceregexp match="^.!DOCTYPE.*$" replace="" flags="im">
    <fileset dir="${xmldir}" includes="*.xml"/>
  </replaceregexp>

</target>


<!-- set subcollection where files should be loaded -->
<target name="exist-subcollection">

 <!-- emory is default repository -->

  <input message="What repository are you building documents for (default: emory)?${line.separator} "
	addproperty="repo"
	defaultvalue="emory"
	validargs="emory,boston,wakeforest,ransom,delaware,wash-sl,southernillinois,pennstate,berg,"/>

<!-- Note: last 'empty' validarg is neede for input to accept 'return'
	& use default value -->

  <echo level="info" message="Loading files for ${repo}"/>

  <!-- define a subcollection to be used for loading data to exist -->

  <property name="exist.subcollection" value="/${repo}"/>

  <echo level="info" message="files will be loaded to ${config.db.collection}${exist.subcollection}"/>

</target>


</project>
