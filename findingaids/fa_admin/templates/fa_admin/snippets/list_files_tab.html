<div>{{ files.paginator.count }} files total</div>
{% with items=files base_url=request.path %}
  {% include "snippets/pagination.html" %}
{% endwith %}

 <table>
    <tr>
        <th colspan="3">Filename</th> {# spans columns for [publish,] preview, & prep #}
        <th>Last Modified</th>
        <th>Last Published</th>
        <th>Available for<br/>Preview</th>
    </tr>
{% for file in files.object_list %}
    <tr>
        <td>{{ file.filename }}</td>
        <td><a class="admin-action"
            href="{% url 'fa-admin:prep-ead-about' file.filename %}{% if file.archive %}?archive={{ file.archive.slug }}{% endif %}">PREP</a></td>
        <td>
            {% if perms.fa_admin.can_preview %}
            <form action="{% url 'fa-admin:preview-ead' %}" method="post">{% csrf_token %}
                {% if file.archive %}<input type="hidden" name="archive" value="{{ file.archive.slug }}"/>{% endif %}
                <button type="submit" name="filename" value="{{ file.filename }}" class="admin-action">PREVIEW</button>
            </form>
            {% endif %}
        </td>
        <td>{{ file.modified|date }}</td>
        <td>{{ file.published|date|default:'' }}</td>
        <td>{{ file.previewed|date|default:'' }}</td>
    </tr>
{% empty %}
  <tr><td colspan="2">No files found</td></tr>
{% endfor %}
</table>

{% with items=files base_url=request.path %}
    {% include "snippets/pagination.html" %}
{% endwith %}


  </div>
</div>

{# make links in this tab (e.g. pagination) load in the same tab #}
<script type="text/javascript">
  $(".ui-tabs-panel.ui-widget-content a").not('.admin-action').on('click', function(event) {
    event.preventDefault();
    $(this).closest('.ui-tabs-panel.ui-widget-content').load(this.href);
  });
</script>

