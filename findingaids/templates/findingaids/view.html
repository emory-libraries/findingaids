<h1>{{ findingaid.title }}</h1>

<h2>Table of contents:</h2>
<ul>        {# FIXME: should section anchor names match what was used before? #}
 <li><a href="#descriptive_summary">Descriptive Summary</a></li>
 <li><a href="#administrative_information">Administrative Information</a></li>
 <li><a href="#collection_description">Collection Description</a></li>
 <li><a href="#control_access">{{ findingaid.archdesc.controlaccess.head }}</a></li>
 {% if findingaid.dsc %} <li><a href="#dsc">{{ findingaid.dsc.head}}</a></li> {% endif %}
</ul>

 {# NOTE: current site has top-level series list duplicated here for complex finding aids #}
<hr/>

<h2><a name="descriptive_summary">Descriptive Summary</a></h2>
  <table>
      {# FIXME: move styles to css #}
    <col width="20%" align="left" valign="top"/>
    <col width="80%" align="left" valign="top"/>
    {#  display the following fields, in this specific order  #}
{# FIXME: which fields may not always be present? #}
      <tr><td>Creator:</td><td>{{ findingaid.archdesc.origination }}</td></tr>
      <tr><td>Title:</td><td> {{ findingaid.unittitle }} </td></tr>
      <tr><td>Call Number:</td><td>{{ findingaid.archdesc.unitid }}</td></tr>
      <tr><td>Extent:</td><td>{{ findingaid.archdesc.extent }}</td></tr>
   {% if findingaid.archdesc.location %}
      <tr><td>Location:</td><td>{{ findingaid.archdesc.location }}</td></tr>
   {% endif %}
      <tr><td>Abstract:</td><td>{{ findingaid.abstract }}</td></tr>
      <tr><td>Language:</td><td>{{ findingaid.archdesc.langmaterial }} </td></tr>
  </table>

<hr/>

<h2><a name="administrative_information">Administrative Information</a></h2>
 {% for section in findingaid.admin_info %}
   <div>
   	<h3>{{ section.head }}</h3>
	{% for para in section.content %}
	    <p>{{para}}</p>
	{% endfor %}
   </div>
 {% endfor %}

<hr/>

<h2><a name="collection_description">Collection Description</a></h2>
 {% for section in findingaid.collection_description %}
   <div>
   	<h3>{{ section.head }}</h3>
	{% for para in section.content %}
	    <p>{{para}}</p>
	{% endfor %}
   </div>
 {% endfor %}

<hr/>

<h2><a name="control_access">{{ findingaid.archdesc.controlaccess.head }}</a></h2>
{{findingaid.archdesc.controlaccess.controlaccess.head}}
{% for ca in findingaid.archdesc.controlaccess.controlaccess %}
   <h3>{{ ca.head}}</h3>
   {% for term in ca.terms %}
    {{ term }}<br/>
   {% endfor %}

{% endfor %}
<hr/>

{# container list or series/subseries listing #}
<h2><a name="dsc">{{ findingaid.dsc.head }}</a></h2>
{% if findingaid.dsc.hasSeries %}       {# list series/subseries here, display on separate page #}
  <ul>
  {% for component in findingaid.dsc.c %}
    <li>{% if component.did.unitid %}{{ component.did.unitid }}: {% endif %}
        {{ component.did.unittitle }}        
        {% if component.hasSubseries %}
          <ul>
            {% for subcomponent in component.c %}   {# c02 #}
            <li>{% if subcomponent.did.unitid %}{{ subcomponent.did.unitid }}: {% endif %}
                {{ subcomponent.did.unittitle }}
                {% if subcomponent.hasSubseries %}
                  <ul>
                    {% for subsub in subcomponent.c %}  {# c03 #}
                    <li>{% if subsub.did.unitid %}{{ subsub.did.unitid }}: {% endif %}
                        {{ subsub.did.unittitle }}

                        {# FIXME: how many levels deep do we need to go?  how to handle more gracefully? #}

                     </li>
                    {% endfor %}
                  </ul>
                {% endif %}
             </li>
            {% endfor %}
          </ul>
        {% endif %}
     </li>
  {% endfor %}
  </ul>
{% else %}
    <table>
        <col width="7%" align="left" valign="top"/>
        <col width="7%" align="left" valign="top"/> {# FIXME: only if there is a container folder OR 2 containers? #}
        <col width="86%"/>
    {% for component in findingaid.dsc.c %}
        {# FIXME: display box/folder heading if first container... #}
        {# FIXME2: only display if there are no titles? #}
        {% if 0 and forloop.first  %}
          <tr class="box-folder">
            <th>Box</th>
            {# FIXME: only display folder label if there are folders -- how? #}
             <th>Folder</th>
             <th class="content">Content</th>
           </tr>
         {% endif %}

        <tr>
            {% for container in component.did.container %}
            <td>{{ container }}</td>            
            {% endfor %}
            <td {% if not component.did.container %} style="font-weight:bold" colspan="3" {% endif %} > {# FIXME temporary style #}
                {{ component.did.unittitle }} 
                {{ component.did.physdesc|default:'' }}
                {{ component.did.abstract|default:'' }}
                {{ component.did.note|default:'' }}
            </td>
        </tr>
        {% if not component.did.container %}
        <tr class="box-folder">
            <th>Box</th>
            {# FIXME: only display folder label if there are folders -- how? #}
             <th>Folder</th>
             <th class="content">Content</th>
         </tr>
        {% endif %}

    {% endfor %}
      </table>
{% endif %}