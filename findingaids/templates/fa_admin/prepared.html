{% extends "fa_admin/base.html" %}
{% block page-subtitle %}: Prepared EAD for {{ filename }}{% endblock %}
{% block content-title %}Prepared EAD for {{ filename }}{% endblock %}

{% block content-body %}

{% if errors %}
<p>Prepared file does not pass checks required for publication!</p>
<ul>
{% for err in errors %}
    <li>{{err}}</li>
{% empty %}
    <li>Sanity-check found no errors</li>
{% endfor %}
</ul>
{% endif %}

{% if xml_status == 200 %} {# only display diffs / download if prep xml can be generated #}
<p><a href="{% url fa-admin:prep-ead-diff filename %}" target="_blank">View file differences line by line.</a></p>

<div class="diff">
{% for c in changes %}        
  <p {% if c|first == "-" %}class="removed"{% endif %}{% if c|first == "+" %}class="added"{% endif %}>{{ c }}</p>  
{% endfor %}
</div>

<hr/> {# provide a link to prep xml after differences have been reviewed #}
<p><a href="{% url fa-admin:prep-ead filename %}" class="admin-action">DOWNLOAD</a></p>

<p>Download and save the the prepared version of {{ filename }}.<br/>
    <i>Recommended:</i> right-click and choose <i>Save link as...</i>.</p>

{% else %}

<p>There was an error loading the file you selected for preparing; most likely,
this indicates that the document contains invalid XML.  Please check the file in
an XML editor and try again.</p>

{% endif %}

{% endblock %}